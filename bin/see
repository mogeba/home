#!/data/data/com.termux/files/usr/bin/ruby

if (ENV["REQUEST_METHOD"] == "POST")
  len = ENV["CONTENT_LENGTH"]
  print "Content-Type: text/html\n\n"
  print "POST #{len}\n"
elsif (ENV["REQUEST_METHOD"] == "GET")
  str = ENV["QUERY_STRING"]
  print "Content-Type: text/html\n\n"
  print "GET\n"
else
  if (File.directory? ARGV[0])
    system "w3m", ARGV[0]
    #Dir.entries(ARGV[0]).each do |name|
    #  next if [ ".", ".."].include?(name)
    #  print "<a href=\"#{$0}?#{name}\">#{name}</a>\n"
    #end
  elsif (File.readable? ARGV[0])
    system "w3m", ARGV[0]
    #File.new(ARGV[0]).each do |line|
    #  print line
    #end
  else
    print "Not Found: #{ARGV[0]}\n"
  end
end
